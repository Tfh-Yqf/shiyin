{"version":3,"sources":["webpack:///C:/Users/Lenovo/Desktop/拾音/ShiYin/uni_modules/wrap-version-update/components/wrap-version-update/wrap-version-update.nvue?2d9b","webpack:///C:/Users/Lenovo/Desktop/拾音/ShiYin/uni_modules/wrap-version-update/components/wrap-version-update/wrap-version-update.nvue?61b1","webpack:///C:/Users/Lenovo/Desktop/拾音/ShiYin/uni_modules/wrap-version-update/components/wrap-version-update/wrap-version-update.nvue?d992","webpack:///C:/Users/Lenovo/Desktop/拾音/ShiYin/uni_modules/wrap-version-update/components/wrap-version-update/wrap-version-update.nvue?81fb","uni-app:///uni_modules/wrap-version-update/components/wrap-version-update/wrap-version-update.nvue","webpack:///C:/Users/Lenovo/Desktop/拾音/ShiYin/uni_modules/wrap-version-update/components/wrap-version-update/wrap-version-update.nvue?13a1","webpack:///C:/Users/Lenovo/Desktop/拾音/ShiYin/uni_modules/wrap-version-update/components/wrap-version-update/wrap-version-update.nvue?3661"],"names":[],"mappings":"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oDADA;AAEA,wBAFA;AAGA,0BAHA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BADA;AAEA;AACA;AACA;AACA;AACA;AACA,WAPA;AAQA;AACA;AACA;AACA,WAXA;AAYA;AACA;AACA,WAdA;;AAgBA;AACA,KA7FA;AA8FA;AACA;AACA;AACA;AACA;AACA,sBADA;AAEA,kDAFA;;AAIA;AACA;AACA;AACA,uBADA;AAEA;AACA,wBADA,EAFA;;AAKA;AACA;AACA;AACA;AACA,aAFA,EAEA,GAFA;AAGA,WAVA;AAWA;AACA;AACA;AACA;AACA,WAfA;;AAiBA,SAnBA,MAmBA;AACA;AACA;AACA,uCADA;AAEA;AACA;AACA;AACA,eALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAbA;;AAeA,WAhBA,EAgBA,GAhBA;AAiBA;AACA;AACA,KA7IA;AA8IA,eA9IA,yBA8IA;AACA;AACA,qBADA;AAEA,kEAFA;AAGA,2BAHA;AAIA;AACA;AACA;AACA;AACA,aAFA;AAGA;AACA,SAVA;;AAYA,KA3JA;AA4JA,eA5JA,yBA4JA;AACA;AACA,kDADA;AAEA,yBAFA;AAGA;AACA;AACA;AACA,4GADA;AAEA,4CAFA;;AAIA;AACA,SAVA;;AAYA,KAzKA,EAhJA,E;;;;;;;;;;;;;AC7CA;AAAA;AAAA;AAAA;AAA6oC,CAAgB,goCAAG,EAAC,C;;;;;;;;;;;ACAjqC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"uni_modules/wrap-version-update/components/wrap-version-update/wrap-version-update.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./wrap-version-update.nvue?vue&type=template&id=ed30df1e&scoped=true&\"\nvar renderjs\nimport script from \"./wrap-version-update.nvue?vue&type=script&lang=js&\"\nexport * from \"./wrap-version-update.nvue?vue&type=script&lang=js&\"\nimport style0 from \"./wrap-version-update.nvue?vue&type=style&index=0&id=ed30df1e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ed30df1e\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/wrap-version-update/components/wrap-version-update/wrap-version-update.nvue\"\nexport default component.exports","export * from \"-!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wrap-version-update.nvue?vue&type=template&id=ed30df1e&scoped=true&\"","var components\ntry {\n  components = {\n    wrapPopup: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/wrap-version-update/components/wrap-popup/wrap-popup\" */ \"@/uni_modules/wrap-version-update/components/wrap-popup/wrap-popup.nvue\"\n      )\n    },\n    wrapText: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/wrap-version-update/components/wrap-text/wrap-text\" */ \"@/uni_modules/wrap-version-update/components/wrap-text/wrap-text.nvue\"\n      )\n    },\n    wrapButton: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/wrap-version-update/components/wrap-button/wrap-button\" */ \"@/uni_modules/wrap-version-update/components/wrap-button/wrap-button.nvue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.show = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wrap-version-update.nvue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wrap-version-update.nvue?vue&type=script&lang=js&\"","<template>\r\n  <wrap-popup :show=\"show\" direction=\"center\" :mask-close=\"release.isForceUpdate\">\r\n    <view class=\"view box-size\">\r\n      <image :src=\"bgImage ? bgImage : defaultBgImg\" class=\"box-size absolute\"></image>\r\n      <view class=\"view box-size absolute desc line-4\"><wrap-text :color=\"textColor\" :text=\"release.description\" :lines=\"lines\"></wrap-text></view>\r\n      <view class=\"absolute footer\" :style=\"{ marginTop: `${release.isForceUpdate ? 540 : 520}rpx` }\">\r\n        <wrap-button size=\"32\" :disabled=\"!btnVisible\" @click=\"handleUpdate\" :color=\"btnTextColor\" :background=\"btnBgColor\" width=\"400\" radius=\"40\" :text=\"btnText\"></wrap-button>\r\n        <view v-if=\"!release.isForceUpdate && btnVisible\" class=\"items-center\" style=\"margin-top: 2rpx;\">\r\n          <view style=\"padding: 2rpx 20rpx\" @click=\"show = false\"><wrap-text :color=\"secondaryBtnTextColor\" :text=\"secondaryBtnText\"></wrap-text></view>\r\n        </view>\r\n        <view v-if=\"!btnVisible\" style=\"margin-top: 10rpx;\"><progress :percent=\"percent\" :color=\"btnBgColor\"></progress></view>\r\n      </view>\r\n    </view>\r\n  </wrap-popup>\r\n</template>\r\n<script>\r\nimport { getVersion, checkUpdate, restart, downloadFile } from '../../js/api.js';\r\nimport wrapButton from '../wrap-button/wrap-button';\r\nimport defaultBgImg from '../../js/img.js';\r\n/**\r\n * version-update 版本更新\r\n * @description 版本更新组件\r\n * @property {String} id 应用id\r\n * @property {String} version 是否手动传入版本号而不使用系统自动获取的版本\r\n * @property {Boolean} loading 是否显示加载\r\n * @property {String} loadingText 加载中文本，默认'检查更新中'\r\n * @property {String} loadingMask 加载点击遮罩关闭功能是否关闭\r\n * @property {String, Number} loadingDelay 加载框多久出现，默认1500ms\r\n * @property {String, Number} lines 超出行省略\r\n *\r\n * @property {String, Number} btnBgColor 按钮背景颜色\r\n * @property {String, Number} btnTextColor 按钮文字颜色\r\n * @property {String, Number} secondaryBtnText 暂不更新按钮文字，默认以后再说\r\n * @property {String, Number} secondaryBtnTextColor 暂不更新按钮文字颜色\r\n *\r\n * @property {String, Number} textColor 更新说明文字颜色\r\n * @property {String, Number} bgImage 自定义背景图\r\n *\r\n * @property {String, Number} errTimes 安装错误次数超过此值提示打开浏览器下载，一般若由高版本降回低版本会出现无法安装的情况\r\n * @property {String, Number} auto 是否自动检查新版本，默认true\r\n *\r\n * @event {Function()} check 检查事件,获取到版本数据就会触发,适合需要自定义更新弹窗出现逻辑的\r\n * @event {Function()} finish 完成事件,获取到版本且不用更新触发\r\n * @event {Function()} error 错误事件,发生错误触发\r\n */\r\nexport default {\r\n  name: 'wrapVersionUpdate',\r\n  props: {\r\n    // 重要！必改！应用id，从WrapStore后台获取，后台地址：https://apps.seepine.com/\r\n    // 其中应用的id填充下方id即可\r\n    id: {\r\n      type: String, //应用id\r\n      default: ''\r\n    },\r\n    // 接口地址\r\n    apiUrl: {\r\n      type: String,\r\n      default: 'https://ed2bb32b-5553-4785-9bec-047aef8f37f3.bspapp.com/check'\r\n    },\r\n    // 加载配置，分别是：是否显示加载、加载文字、是否mask、延迟出现时间\r\n    loading: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    loadingText: {\r\n      type: String,\r\n      default: '检查更新中'\r\n    },\r\n    loadingMask: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    loadingDelay: {\r\n      type: [String, Number],\r\n      default: 1500\r\n    },\r\n    lines: {\r\n      type: Number,\r\n      default: 4\r\n    },\r\n    // 若需要手动传当前app版本号，可传入此值\r\n    version: {\r\n      type: String\r\n    },\r\n    bgImage: {\r\n      type: String\r\n    },\r\n    textColor: {\r\n      type: String,\r\n      default: '#1e1e1e'\r\n    },\r\n    btnBgColor: {\r\n      type: String,\r\n      default: '#0a84ec'\r\n    },\r\n    btnTextColor: {\r\n      type: String,\r\n      default: '#FFFFFF'\r\n    },\r\n    secondaryBtnText: {\r\n      type: String,\r\n      default: '以后再说'\r\n    },\r\n    secondaryBtnTextColor: {\r\n      type: String,\r\n      default: '#afafaf'\r\n    },\r\n    errToast: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    errTimes: {\r\n      type: Number,\r\n      default: 2\r\n    },\r\n    auto: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  components: {\r\n    wrapButton\r\n  },\r\n  data() {\r\n    return {\r\n      show: false,\r\n      init: false,\r\n      release: {\r\n        needUpdate: true,\r\n        forceUpdate: true,\r\n        isForceUpdate: true,\r\n        version: '0.1.0',\r\n        description: '',\r\n        pkgUrl: '',\r\n        wgtUrl: ''\r\n      },\r\n      btnVisible: true,\r\n\r\n      btnText: '立即升级',\r\n\r\n      percent: 0,\r\n      tempPath: '',\r\n      installFlag: false,\r\n\r\n      defaultBgImg: defaultBgImg,\r\n      nowVersion: '',\r\n\r\n      openCount: 0\r\n    };\r\n  },\r\n  computed: {\r\n    config: function() {\r\n      return {\r\n        id: this.id,\r\n        apiUrl: this.apiUrl,\r\n        loading: this.loading,\r\n        loadingText: this.loadingText,\r\n        loadingMask: this.loadingMask,\r\n        loadingDelay: this.loadingDelay\r\n      };\r\n    },\r\n    downUrl: function() {\r\n      if (!this.release.needUpdate) {\r\n        return undefined;\r\n      }\r\n      if (!this.release.isHbuildUpdate && this.release.wgtUrl !== '') {\r\n        return this.release.wgtUrl;\r\n      }\r\n      return this.release.pkgUrl;\r\n    },\r\n    isHot: function() {\r\n      return !this.release.isHbuildUpdate && this.release.wgtUrl !== '';\r\n    }\r\n  },\r\n  created() {\r\n    if (!this.id) {\r\n      uni.showToast({\r\n        title: '请传入应用id',\r\n        icon: 'none',\r\n        duration: 4000\r\n      });\r\n      console.error('重要！必改！应用id必传，从WrapStore后台获取，后台地址：https://apps.seepine.com/');\r\n      return;\r\n    }\r\n    if (this.auto) {\r\n      this.init = true;\r\n    }\r\n    this.check();\r\n  },\r\n  methods: {\r\n    check() {\r\n      getVersion()\r\n        .then(version => {\r\n          this.nowVersion = version;\r\n          return checkUpdate(this.version ? this.version : version, this.config);\r\n        })\r\n        .then(res => {\r\n          this.release = res;\r\n          this.$emit('check', res);\r\n          if (res.needUpdate) {\r\n            if (this.init) {\r\n              this.show = true;\r\n            }\r\n          } else {\r\n            if (res.isTest) {\r\n              uni.showToast({\r\n                title: '测试版' + (this.version ? this.version : this.nowVersion),\r\n                icon: 'none',\r\n                position: 'bottom'\r\n              });\r\n            }\r\n            this.$emit('finish', res);\r\n          }\r\n          this.init = true;\r\n        })\r\n        .catch(err => {\r\n          this.$emit('error', err);\r\n          if (this.errToast) {\r\n            uni.showToast({\r\n              title: err,\r\n              icon: 'none',\r\n              duration: 4000\r\n            });\r\n          }\r\n        });\r\n    },\r\n    handleUpdate() {\r\n      // 如果是ios并且非热更新\r\n      if (uni.getSystemInfoSync().platform === 'ios' && !this.isHot) {\r\n        if (this.release.appleId) {\r\n          plus.runtime.launchApplication(\r\n            {\r\n              action: `itms-apps://itunes.apple.com/cn/app/id${this.release.appleId}?mt=8`\r\n            },\r\n            e => {\r\n              uni.showModal({\r\n                title: '跳转到appStore失败',\r\n                content: '请向app反馈，错误信息：' + e.message,\r\n                confirmText: '复制错误信息',\r\n                success: res => {\r\n                  if (res.confirm) {\r\n                    uni.setClipboardData({\r\n                      data: e.message,\r\n                      success: () => {}\r\n                    });\r\n                  }\r\n                }\r\n              });\r\n            }\r\n          );\r\n        } else {\r\n          uni.showToast({\r\n            title: '未配置appleId无法跳转到appStore，请向app反馈',\r\n            icon: 'none',\r\n            duration: 4000\r\n          });\r\n        }\r\n        return;\r\n      }\r\n      if (this.tempPath !== '') {\r\n        this.openFile();\r\n        return;\r\n      }\r\n      if (this.btnVisible) {\r\n        this.btnVisible = false;\r\n        downloadFile({\r\n          url: this.downUrl,\r\n          success: filePath => {\r\n            this.percent = 100;\r\n            this.tempPath = filePath;\r\n            this.btnText = '马上安装';\r\n            this.openFile();\r\n          },\r\n          fail: e => {\r\n            console.error('下载文件', e);\r\n            this.btnVisible = true;\r\n          },\r\n          progress: progress => {\r\n            this.percent = progress;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    openFile: function() {\r\n      this.btnVisible = true;\r\n      if (!this.installFlag) {\r\n        this.installFlag = true;\r\n        uni.showToast({\r\n          icon: 'none',\r\n          title: this.isHot ? '正在安装中' : '正在打开安装程序'\r\n        });\r\n        if (this.isHot) {\r\n          //热更新\r\n          plus.runtime.install(\r\n            this.tempPath,\r\n            {\r\n              force: false\r\n            },\r\n            () => {\r\n              uni.hideToast();\r\n              setTimeout(() => {\r\n                plus.runtime.restart();\r\n              }, 100);\r\n            },\r\n            e => {\r\n              console.error('热更新失败', e);\r\n              uni.hideToast();\r\n              this.installFail();\r\n            }\r\n          );\r\n        } else {\r\n          setTimeout(() => {\r\n            uni.openDocument({\r\n              filePath: this.tempPath,\r\n              fail: e => {\r\n                console.error('打开apk失败', e);\r\n                this.installFail();\r\n              },\r\n              complete: () => {\r\n                uni.hideToast();\r\n                this.installFlag = false;\r\n                this.openCount++;\r\n                if (this.openCount > this.errTimes) {\r\n                  this.installFail();\r\n                }\r\n              }\r\n            });\r\n          }, 500);\r\n        }\r\n      }\r\n    },\r\n    installFail() {\r\n      uni.showModal({\r\n        title: '温馨提醒',\r\n        content: '请问是否出现安装包损坏或其他原因导致无法正常安装新版本的情况?请前往浏览器下载最新版本手动安装',\r\n        confirmText: '立刻前往',\r\n        success: res => {\r\n          if (res.confirm) {\r\n            plus.runtime.openURL(`https://ed2bb32b-5553-4785-9bec-047aef8f37f3.bspapp.com/http/app?id=${this.id}`, () => {\r\n              this.openUrlFail();\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    openUrlFail() {\r\n      uni.showModal({\r\n        content: '打开浏览器失败,请复制下载地址,手动打开手机浏览器输入地址下载',\r\n        confirmText: '复制',\r\n        success: res => {\r\n          if (res.confirm) {\r\n            uni.setClipboardData({\r\n              data: `https://ed2bb32b-5553-4785-9bec-047aef8f37f3.bspapp.com/http/app?id=${this.id}`,\r\n              success: () => {}\r\n            });\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n@import '../../css/index.scss';\r\n\r\n.box-size {\r\n  width: 491rpx;\r\n  height: 653rpx;\r\n}\r\n\r\n.desc {\r\n  margin-top: 326rpx;\r\n  padding: 0 30rpx;\r\n  width: 431rpx;\r\n}\r\n\r\n.desc-text {\r\n  line-height: 44rpx;\r\n  font-size: 30rpx;\r\n}\r\n\r\n.footer {\r\n  margin-left: 50rpx;\r\n}\r\n</style>\n","import mod from \"-!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wrap-version-update.nvue?vue&type=style&index=0&id=ed30df1e&scoped=true&lang=css&\"; export default mod; export * from \"-!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\tengxun\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wrap-version-update.nvue?vue&type=style&index=0&id=ed30df1e&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1665367552362\n      var cssReload = require(\"E:/tengxun/HBuilderX.3.4.7.20220422/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}